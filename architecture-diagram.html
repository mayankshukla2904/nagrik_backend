<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NAGRIK 2.0 - System Architecture Diagram</title>
    <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .diagram-section {
            padding: 40px;
        }
        
        .section-title {
            font-size: 1.8em;
            color: #2c3e50;
            margin-bottom: 20px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        .diagram-container {
            margin: 30px 0;
            border: 2px solid #ecf0f1;
            border-radius: 10px;
            padding: 20px;
            background: #fafafa;
        }
        
        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .feature-card {
            background: white;
            border: 1px solid #e1e8ed;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .feature-card h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .tech-category {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
        }
        
        .tech-category h4 {
            color: #2c3e50;
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        .tech-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .tech-list li {
            padding: 5px 0;
            border-bottom: 1px solid #e1e8ed;
        }
        
        .tech-list li:last-child {
            border-bottom: none;
        }
        
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ›ï¸ NAGRIK 2.0</h1>
            <p>System Architecture & Technical Overview</p>
        </div>
        
        <div class="diagram-section">
            <h2 class="section-title">ğŸ—ï¸ High-Level System Architecture</h2>
            
            <div class="diagram-container">
                <div class="mermaid">
                    graph TB
                        subgraph "ğŸŒ User Interface Layer"
                            A[ğŸ“± WhatsApp Bot<br/>Baileys Integration] 
                            B[ğŸ’» Web Dashboard<br/>Admin Interface]
                            C[ğŸ“² Mobile App<br/>Future Integration]
                        end
                        
                        subgraph "ğŸ”Œ API Gateway Layer"
                            D[ğŸš€ Express.js Backend<br/>Port 3000<br/>RESTful APIs]
                        end
                        
                        subgraph "ğŸ¤– AI/ML Processing Layer"
                            E[ğŸ§  Enhanced RAG Classifier<br/>Python Flask - Port 5000]
                            F[âš¡ OpenAI GPT-3.5-turbo<br/>Text Analysis & Enhancement]
                            G[ğŸ” Similarity Detection<br/>TF-IDF Vectorization]
                            H[ğŸ“ Location Validator<br/>Jharkhand Districts]
                        end
                        
                        subgraph "ğŸ’¾ Data Layer"
                            I[ğŸ—„ï¸ MongoDB Database<br/>Enhanced Complaint Model]
                            J[ğŸ“ File Storage<br/>Attachments & Media]
                        end
                        
                        subgraph "ğŸ”— External Services"
                            K[ğŸ’¬ WhatsApp Web API<br/>Message Gateway]
                            L[ğŸ›ï¸ Government APIs<br/>Future Integration]
                            M[ğŸ—ºï¸ Maps & Location<br/>Geocoding Services]
                        end
                        
                        subgraph "âš™ï¸ Support Services"
                            N[ğŸ“Š Analytics Engine<br/>Real-time Metrics]
                            O[ğŸ”” Notification Service<br/>Department Alerts]
                            P[ğŸ›¡ï¸ Security Layer<br/>Auth & Validation]
                        end
                        
                        A --> D
                        B --> D
                        C --> D
                        
                        D --> E
                        D --> P
                        E --> F
                        E --> G
                        E --> H
                        
                        D --> I
                        D --> J
                        D --> N
                        D --> O
                        
                        A --> K
                        E --> M
                        
                        style A fill:#25D366,stroke:#1DA1F2,stroke-width:3px,color:#fff
                        style B fill:#4285F4,stroke:#1DA1F2,stroke-width:3px,color:#fff
                        style C fill:#9C27B0,stroke:#1DA1F2,stroke-width:3px,color:#fff
                        style D fill:#FF9800,stroke:#1DA1F2,stroke-width:3px,color:#fff
                        style E fill:#FF6B35,stroke:#1DA1F2,stroke-width:3px,color:#fff
                        style F fill:#10A37F,stroke:#1DA1F2,stroke-width:3px,color:#fff
                        style I fill:#47A248,stroke:#1DA1F2,stroke-width:3px,color:#fff
                        style K fill:#25D366,stroke:#1DA1F2,stroke-width:3px,color:#fff
                        style N fill:#E91E63,stroke:#1DA1F2,stroke-width:3px,color:#fff
                        style P fill:#F44336,stroke:#1DA1F2,stroke-width:3px,color:#fff
                </div>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #25D366;"></div>
                    <span>WhatsApp Integration</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #4285F4;"></div>
                    <span>Web Interfaces</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FF9800;"></div>
                    <span>Backend Services</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FF6B35;"></div>
                    <span>AI/ML Components</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #47A248;"></div>
                    <span>Database Layer</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #E91E63;"></div>
                    <span>Analytics & Monitoring</span>
                </div>
            </div>
        </div>
        
        <div class="diagram-section">
            <h2 class="section-title">ğŸ”„ Data Flow Architecture</h2>
            
            <div class="diagram-container">
                <div class="mermaid">
                    flowchart TD
                        A[ğŸ‘¤ Citizen Input<br/>WhatsApp/Web] --> B{ğŸ“± Input Channel?}
                        
                        B -->|WhatsApp| C[ğŸ’¬ WhatsApp Bot<br/>Baileys Handler]
                        B -->|Web| D[ğŸŒ Web Form<br/>Dashboard Interface]
                        
                        C --> E[ğŸ“ Message Processing<br/>Extract Text & Media]
                        D --> E
                        
                        E --> F[ğŸ” Pre-processing<br/>Clean & Validate]
                        
                        F --> G[ğŸ¤– Enhanced RAG Classifier<br/>AI Processing Pipeline]
                        
                        subgraph G[ğŸ§  AI Processing Pipeline]
                            G1[ğŸ”¤ Text Analysis<br/>NLP Processing]
                            G2[ğŸ“Š Category Classification<br/>14 Department Types]
                            G3[âš¡ Priority Assessment<br/>Urgency Detection]
                            G4[ğŸ˜Š Sentiment Analysis<br/>Emotion Detection]
                            G5[ğŸ“ Location Validation<br/>Jharkhand Districts]
                            G6[ğŸ”§ Data Enhancement<br/>Missing Field Completion]
                            
                            G1 --> G2 --> G3 --> G4 --> G5 --> G6
                        end
                        
                        G --> H[ğŸ” Similarity Check<br/>Duplicate Detection]
                        
                        H --> I{ğŸ¤” Similar Found?}
                        
                        I -->|âœ… Yes| J[ğŸ‘¥ Suggest Upvoting<br/>Existing Complaint]
                        I -->|âŒ No| K[ğŸ“„ Create New Entry<br/>Enhanced Complaint]
                        
                        J --> L[âš–ï¸ User Decision<br/>Upvote vs New]
                        L -->|ğŸ‘ Upvote| M[ğŸ“ˆ Increment Count<br/>Boost Priority]
                        L -->|ğŸ“ New| K
                        
                        K --> N[ğŸ›ï¸ Auto-assign Department<br/>Smart Routing]
                        M --> O[ğŸ”„ Update Priority<br/>Threshold Check]
                        N --> O
                        
                        O --> P[ğŸ’¾ Store in Database<br/>MongoDB Persistence]
                        P --> Q[ğŸ“Š Real-time Dashboard<br/>Live Updates]
                        P --> R[ğŸ”” Department Notification<br/>Alert System]
                        P --> S[ğŸ“ˆ Analytics Update<br/>Metrics Tracking]
                        
                        Q --> T[ğŸ‘¥ Public View<br/>Transparency]
                        R --> U[ğŸ›ï¸ Department Action<br/>Resolution Process]
                        S --> V[ğŸ“Š Insights Dashboard<br/>Trend Analysis]
                        
                        style A fill:#E1F5FE,stroke:#0277BD,stroke-width:2px
                        style G fill:#FFF3E0,stroke:#F57C00,stroke-width:2px
                        style P fill:#E8F5E8,stroke:#388E3C,stroke-width:2px
                        style Q fill:#F3E5F5,stroke:#7B1FA2,stroke-width:2px
                        style R fill:#FFEBEE,stroke:#D32F2F,stroke-width:2px
                </div>
            </div>
        </div>
        
        <div class="diagram-section">
            <h2 class="section-title">ğŸ¯ Key Features & Capabilities</h2>
            
            <div class="features">
                <div class="feature-card">
                    <h3>ğŸ¤– AI-Powered Classification</h3>
                    <ul>
                        <li>OpenAI GPT-3.5-turbo integration</li>
                        <li>Jharkhand-specific intelligence</li>
                        <li>14 government department categories</li>
                        <li>85%+ classification accuracy</li>
                        <li>Automatic priority assignment</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h3>ğŸ“± Multi-Channel Access</h3>
                    <ul>
                        <li>WhatsApp bot for rural areas</li>
                        <li>Web dashboard for administrators</li>
                        <li>Mobile-responsive design</li>
                        <li>Future mobile app support</li>
                        <li>Offline capability planning</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h3>ğŸ‘¥ Community Engagement</h3>
                    <ul>
                        <li>Upvoting system for similar complaints</li>
                        <li>Duplicate detection and merging</li>
                        <li>Community-driven prioritization</li>
                        <li>Social proof mechanisms</li>
                        <li>Trending complaint identification</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h3>ğŸ“Š Real-time Analytics</h3>
                    <ul>
                        <li>Department-wise filtering</li>
                        <li>Priority-based sorting</li>
                        <li>Resolution time tracking</li>
                        <li>Performance metrics</li>
                        <li>Trend analysis and insights</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h3>ğŸ” Smart Processing</h3>
                    <ul>
                        <li>TF-IDF similarity detection</li>
                        <li>Sentiment analysis</li>
                        <li>Location validation</li>
                        <li>Missing data completion</li>
                        <li>Predictive resolution times</li>
                    </ul>
                </div>
                
                <div class="feature-card">
                    <h3>ğŸ›¡ï¸ Security & Reliability</h3>
                    <ul>
                        <li>Rate limiting and spam protection</li>
                        <li>Input validation and sanitization</li>
                        <li>HTTPS/TLS encryption</li>
                        <li>Error handling and recovery</li>
                        <li>99.9% uptime target</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="diagram-section">
            <h2 class="section-title">ğŸ’» Technology Stack</h2>
            
            <div class="tech-stack">
                <div class="tech-category">
                    <h4>ğŸ–¥ï¸ Backend Technologies</h4>
                    <ul class="tech-list">
                        <li><strong>Runtime:</strong> Node.js 18+</li>
                        <li><strong>Framework:</strong> Express.js 4.18+</li>
                        <li><strong>Database:</strong> MongoDB 6.0+</li>
                        <li><strong>ODM:</strong> Mongoose 7.0+</li>
                        <li><strong>Authentication:</strong> JWT</li>
                        <li><strong>Validation:</strong> Joi</li>
                    </ul>
                </div>
                
                <div class="tech-category">
                    <h4>ğŸ¤– AI/ML Stack</h4>
                    <ul class="tech-list">
                        <li><strong>Framework:</strong> Python 3.10+ Flask</li>
                        <li><strong>NLP:</strong> OpenAI GPT-3.5-turbo</li>
                        <li><strong>Processing:</strong> NLTK, TextBlob</li>
                        <li><strong>ML:</strong> Scikit-learn, Pandas</li>
                        <li><strong>Vectors:</strong> TF-IDF, Cosine Similarity</li>
                    </ul>
                </div>
                
                <div class="tech-category">
                    <h4>ğŸŒ Frontend Technologies</h4>
                    <ul class="tech-list">
                        <li><strong>Core:</strong> Vanilla JavaScript ES6+</li>
                        <li><strong>Styling:</strong> CSS3 Flexbox/Grid</li>
                        <li><strong>Icons:</strong> Font Awesome</li>
                        <li><strong>Responsive:</strong> Mobile-first design</li>
                        <li><strong>Real-time:</strong> WebSockets (planned)</li>
                    </ul>
                </div>
                
                <div class="tech-category">
                    <h4>ğŸ”— Integration Services</h4>
                    <ul class="tech-list">
                        <li><strong>WhatsApp:</strong> Baileys Web API</li>
                        <li><strong>AI:</strong> OpenAI API</li>
                        <li><strong>Maps:</strong> Geocoding services</li>
                        <li><strong>Storage:</strong> File system / Cloud</li>
                        <li><strong>Monitoring:</strong> Custom analytics</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="diagram-section">
            <h2 class="section-title">ğŸ“ˆ Performance Metrics</h2>
            
            <div class="metrics">
                <div class="metric-card">
                    <div class="metric-value">&lt; 2s</div>
                    <div class="metric-label">Response Time</div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-value">85%+</div>
                    <div class="metric-label">Classification Accuracy</div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-value">99.9%</div>
                    <div class="metric-label">Target Uptime</div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-value">1000+</div>
                    <div class="metric-label">Concurrent Users</div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-value">14</div>
                    <div class="metric-label">Department Categories</div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-value">24</div>
                    <div class="metric-label">Jharkhand Districts</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                htmlLabels: true,
                curve: 'basis',
                nodeSpacing: 50,
                rankSpacing: 80
            },
            themeVariables: {
                primaryColor: '#3498db',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#2980b9',
                lineColor: '#34495e',
                sectionBkgColor: '#ecf0f1',
                altSectionBkgColor: '#bdc3c7',
                gridColor: '#95a5a6',
                tertiaryColor: '#f39c12'
            }
        });
    </script>
</body>
</html>
